'use strict';

<<<<<<< HEAD
var NodeWatcher = require('./src/node_watcher');
var PollWatcher = require('./src/poll_watcher');
var WatchmanWatcher = require('./src/watchman_watcher');
var FSEventsWatcher = require('./src/fsevents_watcher');
=======
const NodeWatcher = require('./src/node_watcher');
const PollWatcher = require('./src/poll_watcher');
const WatchmanWatcher = require('./src/watchman_watcher');
const WatchexecWatcher = require('./src/watchexec_watcher');

function throwNoFSEventsSupports() {
  throw new Error('Sane >= 4 no longer support the fsevents module.');
}
>>>>>>> master

function sane(dir, options) {
  options = options || {};
  if (options.watcher) {
<<<<<<< HEAD
    var WatcherClass = require(options.watcher);
=======
    const WatcherClass = require(options.watcher);
>>>>>>> master
    return new WatcherClass(dir, options);
  } else if (options.poll) {
    return new PollWatcher(dir, options);
  } else if (options.watchman) {
    return new WatchmanWatcher(dir, options);
<<<<<<< HEAD
  } else if (options.fsevents) {
    return new FSEventsWatcher(dir, options);
=======
  } else if (options.watchexec) {
    return new WatchexecWatcher(dir, options);
  } else if (options.fsevents) {
    throwNoFSEventsSupports();
>>>>>>> master
  } else {
    return new NodeWatcher(dir, options);
  }
}

module.exports = sane;
sane.NodeWatcher = NodeWatcher;
sane.PollWatcher = PollWatcher;
sane.WatchmanWatcher = WatchmanWatcher;
<<<<<<< HEAD
sane.FSEventsWatcher = FSEventsWatcher;
=======
sane.WatchexecWatcher = WatchexecWatcher;

Object.defineProperty(sane, 'FSEventsWatcher', {
  get() {
    return throwNoFSEventsSupports();
  },
});
>>>>>>> master
