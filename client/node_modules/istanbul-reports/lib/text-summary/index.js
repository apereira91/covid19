/*
 Copyright 2012-2015, Yahoo Inc.
 Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
 */
<<<<<<< HEAD
"use strict";
=======
'use strict';
>>>>>>> master

function TextSummaryReport(opts) {
    opts = opts || {};
    this.file = opts.file || null;
}

function lineForKey(summary, key) {
<<<<<<< HEAD
    var metrics = summary[key],
        skipped,
        result;
=======
    const metrics = summary[key];
>>>>>>> master

    key = key.substring(0, 1).toUpperCase() + key.substring(1);
    if (key.length < 12) {
        key += '                   '.substring(0, 12 - key.length);
    }
<<<<<<< HEAD
    result = [key, ':', metrics.pct + '%', '(', metrics.covered + '/' + metrics.total, ')'].join(' ');
    skipped = metrics.skipped;
    if (skipped > 0) {
        result += ', ' + skipped + ' ignored';
=======
    const result = [
        key,
        ':',
        metrics.pct + '%',
        '(',
        metrics.covered + '/' + metrics.total,
        ')'
    ].join(' ');
    const skipped = metrics.skipped;
    if (skipped > 0) {
        return result + ', ' + skipped + ' ignored';
>>>>>>> master
    }
    return result;
}

<<<<<<< HEAD
TextSummaryReport.prototype.onStart = function (node, context) {
    var summary = node.getCoverageSummary(),
        cw,
        printLine = function (key) {
            var str = lineForKey(summary, key),
                clazz = context.classForPercent(key, summary[key].pct);
            cw.println(cw.colorize(str, clazz));
        };

    cw = context.writer.writeFile(this.file);
    cw.println('');
    cw.println('=============================== Coverage summary ===============================');
=======
TextSummaryReport.prototype.onStart = function(node, context) {
    const summary = node.getCoverageSummary();
    const cw = context.writer.writeFile(this.file);
    const printLine = function(key) {
        const str = lineForKey(summary, key);
        const clazz = context.classForPercent(key, summary[key].pct);
        cw.println(cw.colorize(str, clazz));
    };

    cw.println('');
    cw.println(
        '=============================== Coverage summary ==============================='
    );
>>>>>>> master
    printLine('statements');
    printLine('branches');
    printLine('functions');
    printLine('lines');
<<<<<<< HEAD
    cw.println('================================================================================');
=======
    cw.println(
        '================================================================================'
    );
>>>>>>> master
    cw.close();
};

module.exports = TextSummaryReport;
